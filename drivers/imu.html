<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="See drivers/imu/imu (doxygen) for the Doxygen documentation." name="description" />

    <title>ADIS no-OS driver &#8212; no-OS  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../_static/app.min.css?v=85dade36" />
    <script async="async" src="../_static/app.umd.js?v=3a4867e9"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MAX22516 no-OS Driver" href="io-link/max22516.html" />
    <link rel="prev" title="ADMFM2000 no-OS driver" href="frequency/admfm2000.html" />
   
  
  
  <meta name="repository" content="no-OS">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head>
  
    <body>
  
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        
        <a id="logo" href="../index.html">
          <div>no-OS</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../index.html" class="current">no-OS</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div class="header localtoc-header">
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">ADIS no-OS driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#applications">Applications</a></li>
<li><a class="reference internal" href="#adis-driver-source-code">ADIS Driver Source Code</a></li>
<li><a class="reference internal" href="#adis-driver-usage-outside-of-no-os">ADIS Driver Usage Outside of No-OS</a></li>
<li><a class="reference internal" href="#adis-driver-usage-with-no-os">ADIS Driver Usage with No-OS</a></li>
<li><a class="reference internal" href="#adis-device-initialization">ADIS Device Initialization</a></li>
<li><a class="reference internal" href="#adis-device-measurements-register-readings">ADIS Device Measurements - Register Readings</a><ul>
<li><a class="reference internal" href="#acceleration-data">Acceleration Data</a></li>
<li><a class="reference internal" href="#gyroscope-data">Gyroscope Data</a></li>
<li><a class="reference internal" href="#delta-velocity-data">Delta Velocity Data</a></li>
<li><a class="reference internal" href="#delta-angle-data">Delta Angle Data</a></li>
<li><a class="reference internal" href="#temperature-data">Temperature Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adis-device-measurements-burst-readings">ADIS Device Measurements - Burst Readings</a></li>
<li><a class="reference internal" href="#adis-diagnosis-data">ADIS Diagnosis Data</a><ul>
<li><a class="reference internal" href="#common">Common</a></li>
<li><a class="reference internal" href="#adis1646x">ADIS1646X</a></li>
<li><a class="reference internal" href="#adis1647x">ADIS1647X</a></li>
<li><a class="reference internal" href="#adis1650x">ADIS1650X</a></li>
<li><a class="reference internal" href="#adis1657x">ADIS1657X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adis-identification-data">ADIS Identification Data</a></li>
<li><a class="reference internal" href="#adis-configuration-data">ADIS Configuration Data</a><ul>
<li><a class="reference internal" href="#accelerometer-calibration-offset">Accelerometer calibration offset</a></li>
<li><a class="reference internal" href="#gyroscope-calibration-offset">Gyroscope calibration offset</a></li>
<li><a class="reference internal" href="#filters-configuration">Filters configuration</a></li>
<li><a class="reference internal" href="#continuous-bias-estimation-configuration">Continuous Bias Estimation Configuration</a></li>
<li><a class="reference internal" href="#fifo-configuration">FIFO Configuration</a></li>
<li><a class="reference internal" href="#miscellaneous-configuration">Miscellaneous configuration</a></li>
<li><a class="reference internal" href="#adis-commands">ADIS Commands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adis-read-only-registers">ADIS read-only registers</a></li>
<li><a class="reference internal" href="#adis-scratch-pad-registers">ADIS scratch pad registers</a></li>
<li><a class="reference internal" href="#adis-driver-initialization-example">ADIS Driver Initialization Example</a><ul>
<li><a class="reference internal" href="#id14">ADIS1646X</a></li>
<li><a class="reference internal" href="#id15">ADIS1647X</a></li>
<li><a class="reference internal" href="#id16">ADIS1650X</a></li>
<li><a class="reference internal" href="#adis1654x">ADIS1654X</a></li>
<li><a class="reference internal" href="#adis1655x">ADIS1655X</a></li>
<li><a class="reference internal" href="#id17">ADIS1657X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adis-iio-driver-source-code">ADIS IIO Driver Source Code</a></li>
<li><a class="reference internal" href="#iio-adis-device-configuration">IIO ADIS Device Configuration</a><ul>
<li><a class="reference internal" href="#device-attributes">Device Attributes</a></li>
<li><a class="reference internal" href="#device-channels">Device Channels</a></li>
<li><a class="reference internal" href="#device-debug-attributes">Device Debug Attributes</a></li>
<li><a class="reference internal" href="#device-buffers">Device Buffers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iio-adis-driver-initialization-example">IIO ADIS Driver Initialization Example</a><ul>
<li><a class="reference internal" href="#id33">ADIS1646X</a></li>
<li><a class="reference internal" href="#id34">ADIS1647X</a></li>
<li><a class="reference internal" href="#id35">ADIS1650X</a></li>
<li><a class="reference internal" href="#id36">ADIS1654X</a></li>
<li><a class="reference internal" href="#id37">ADIS1655X</a></li>
<li><a class="reference internal" href="#id38">ADIS1657X</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../index.html">
      no-OS
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../index.html" class="current">no-OS</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../drivers_guide.html">no-OS drivers guide</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../drivers_doc.html">no-OS drivers list</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="amplifiers/adl8113.html">ADL8113 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="accel/adxl355.html">ADXL355 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="accel/adxl38x.html">ADXL38x no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad405x.html">AD405X no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad7490.html">AD7490 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad7768.html">AD7768 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad7768-1.html">AD7768-1 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad796x.html">AD796X no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad9083.html">AD9083 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad9208.html">AD9208 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/ad9625.html">AD9625 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/adaq7980.html">ADAQ7980 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/adm1177.html">ADM1177 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/max9611pmb.html">MAX9611 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc/pulsar_adc.html">AD400X no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="adc-dac/ad74416h.html">AD74416H no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="axi/axi_sysid.html">System ID (AXI_SYSID) no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max14914.html">MAX14914 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max14919.html">MAX14919 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max149x6.html">MAX149X6 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max22190.html">MAX22190 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max22196.html">MAX22196 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital-io/max22200.html">MAX22200 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dac/ad3552r.html">AD3552R no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dac/ad8460.html">AD8460 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dac/ad9152.html">AD9152 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dac/max22017.html">MAX22017 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/ad9523.html">AD9523 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf4030.html">ADF4030 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf4350.html">ADF4350 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf4368.html">ADF4368 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf4377.html">ADF4377 No-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf4382.html">ADF4382 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/adf5611.html">ADF5611 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency/admfm2000.html">ADMFM2000 no-OS driver</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ADIS no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="io-link/max22516.html">MAX22516 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="led/max25603.html">MAX25603 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="meter/ade7816.html">ADE7816 no-OS documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="meter/ade7913.html">ADE7913 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="meter/ade9113.html">ADE9113 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="mux/adg2404.html">ADG2404/ADG6404 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="rf-transceiver/madura.html">ADRV902x (Madura) no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="rf-transceiver/talise.html">ADRV9009 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="switch/adg1712.html">ADG1712 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="switch/adg1736.html">ADG1736 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="switch/adgm3121.html">ADGM3144/ADGM3121 MEMS Switch Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="switch/adgs6414d.html">ADGS6414D Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="temperature/adt75.html">ADT75 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="temperature/ltc2983.html">LTC2983 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="temperature/max31827.html">MAX31827 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="temperature/max31855.html">MAX31855 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ades1754.html">ADES1754 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/adp1050.html">ADP1050 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/adp1055.html">ADP1055 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/adp5055.html">ADP5055 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/lt3074.html">LT3074 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/lt7170.html">LT7170 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/lt7182s.html">LT7182S no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/lt8491.html">LT8491 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/lt8722.html">LT8722 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltc2992.html">LTC2992 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltc4162l.html">LTC4162L no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltc4296.html">LTC4296 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltc7841.html">LTC7841 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltc7871.html">LTC7871 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltm4686.html">LTM4686 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/ltp8800.html">LTP8800 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/max17851.html">MAX17851 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="power/max42500.html">MAX42500 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="potentiometer/ad5293.html">AD5293 no-OS driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ethernet/adin1110.html">ADIN1110 no-OS Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="gyroscope/adxrs290.html">ADXRS290 no-OS Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../projects_doc.html">no-OS projects list</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad405x.html">AD405X no-OS Example Project STM32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad469x_evb.html">AD469x no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad7091r8-sdz.html">AD7091R-2/-4/-8 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad7606x-fmc.html">AD7606x no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad7616-st.html">AD7616 no-OS Example Project on SDP-K1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad7768-1fmcz.html">AD7768-1 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad796x_fmcz.html">AD796x no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad9081.html">ad9081 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad9208.html">AD9208 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad9434-fmc-500ebz.html">AD9434-FMC-500EBZ no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/ad9467.html">AD9467 no-OS Example project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/eval-ad7490sdz.html">EVAL-AD7490SDZ no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc/pulsar-adc.html">AD400x no-OS Example Project on ZED and SDP-K1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adc-dac/ad74416h.html">AD74416H no-OS Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf4030.html">Evaluating the ADF4030</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf4368.html">Evaluating the ADF4368</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf4371.html">ADF4371 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf4377_sdz.html">Evaluating the ADF4377 Wideband Synthesizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf4382.html">ADF4382 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/frequency/adf5611.html">Evaluating the ADF5611</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1646x.html">ADIS1646X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1647x.html">ADIS1647X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1650x.html">ADIS1650X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1654x.html">ADIS1654X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1655x.html">ADIS1655X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/imu/eval-adis1657x.html">ADIS1657X Family no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/meter/eval-ade7913.html">EVAL-ADE7913 no-OS Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/meter/eval-ade9430.html">EVAL-ADE9430 Sensor-to-Cloud no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/rf-transceiver/adrv9001.html">ADRV9001 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/rf-transceiver/adrv902x.html">adrv902x no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/eval/apard32690.html">AD-APARD32690-SL no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/digital-io/max14914.html">MAX14914 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/digital-io/max14919.html">MAX14919 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ades1754.html">Evaluating the EVAL-ADES1754</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/adp1050.html">ADP1050 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/adp1055.html">ADP1055 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/adp5055.html">ADP5055 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/dc2703a.html">Evaluating the LT8491</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/lt3074.html">Evaluating the LT3074</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/lt7170.html">Evaluating the LT7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/lt7182s.html">Evaluating the LT7182S</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/lt8722.html">Evaluating the LT8722</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltc4162l.html">Evaluating the LTC4162L</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltc4296.html">LTC4296 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltc7841.html">Evaluating the LTC7841</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltc7871.html">Evaluating the LTC7871</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltm4686.html">Evaluating the LTM4686</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/ltp8800.html">Evaluating the LTP8800</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/power/max42500.html">MAX42500 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/dac/ad3552r_fmcz.html">EVAL-AD3552R no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/dac/eval-ad8460.html">Evaluating the EVAL-AD8460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/dac/max22017.html">MAX22017 no-OS Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/temperature/ltc2983.html">Evaluating the LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/temperature/max31827-evkit.html">Evaluating the MAX31827</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/gyroscope/adxrs290-pmdz.html">ADXRS290-PMDZ no-OS Project</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../build_guide.html">No-OS Build Guide</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../build_guides/build_maxim.html">Maxim Build Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_guides/build_ftd2xx.html">Build against FTD2XX library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_guides/build_win.html">Windows Build Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_guides/build_mac.html">MAC Build Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to no-OS</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
  <nav class="breadcrumb"><ol><li><a href="../drivers_doc.html">no-OS drivers list</a></li></ol></nav>
</div>
          <div class="body" role="main">
            
  <section id="adis-no-os-driver">
<h1><a class="toc-backref" href="#id39" role="doc-backlink">ADIS no-OS driver</a><a class="headerlink" href="#adis-no-os-driver" title="Link to this heading"></a></h1>
<p><span>See </span><a class="reference external" href="../doxygen/dir_413156a487781955a0a4caceb97dff71.html"><span>drivers/imu/imu (doxygen)</span></a><span> for the Doxygen documentation.</span></p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adis-no-os-driver" id="id39">ADIS no-OS driver</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-devices" id="id40">Supported Devices</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id41">Overview</a></p></li>
<li><p><a class="reference internal" href="#applications" id="id42">Applications</a></p></li>
<li><p><a class="reference internal" href="#adis-driver-source-code" id="id43">ADIS Driver Source Code</a></p></li>
<li><p><a class="reference internal" href="#adis-driver-usage-outside-of-no-os" id="id44">ADIS Driver Usage Outside of No-OS</a></p></li>
<li><p><a class="reference internal" href="#adis-driver-usage-with-no-os" id="id45">ADIS Driver Usage with No-OS</a></p></li>
<li><p><a class="reference internal" href="#adis-device-initialization" id="id46">ADIS Device Initialization</a></p></li>
<li><p><a class="reference internal" href="#adis-device-measurements-register-readings" id="id47">ADIS Device Measurements - Register Readings</a></p></li>
<li><p><a class="reference internal" href="#adis-device-measurements-burst-readings" id="id48">ADIS Device Measurements - Burst Readings</a></p></li>
<li><p><a class="reference internal" href="#adis-diagnosis-data" id="id49">ADIS Diagnosis Data</a></p></li>
<li><p><a class="reference internal" href="#adis-identification-data" id="id50">ADIS Identification Data</a></p></li>
<li><p><a class="reference internal" href="#adis-configuration-data" id="id51">ADIS Configuration Data</a></p></li>
<li><p><a class="reference internal" href="#adis-read-only-registers" id="id52">ADIS read-only registers</a></p></li>
<li><p><a class="reference internal" href="#adis-scratch-pad-registers" id="id53">ADIS scratch pad registers</a></p></li>
<li><p><a class="reference internal" href="#adis-driver-initialization-example" id="id54">ADIS Driver Initialization Example</a></p></li>
<li><p><a class="reference internal" href="#adis-iio-driver-source-code" id="id55">ADIS IIO Driver Source Code</a></p></li>
<li><p><a class="reference internal" href="#iio-adis-device-configuration" id="id56">IIO ADIS Device Configuration</a></p></li>
<li><p><a class="reference internal" href="#iio-adis-driver-initialization-example" id="id57">IIO ADIS Driver Initialization Example</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="supported-devices">
<h2><a class="toc-backref" href="#id40" role="doc-backlink">Supported Devices</a><a class="headerlink" href="#supported-devices" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16465" target="_blank">ADIS16465</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16467" target="_blank">ADIS16467</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16470" target="_blank">ADIS16470</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16475" target="_blank">ADIS16475</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16477" target="_blank">ADIS16477</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16500" target="_blank">ADIS16500</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16501" target="_blank">ADIS16501</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16505" target="_blank">ADIS16505</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16550" target="_blank">ADIS16550</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16507" target="_blank">ADIS16507</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16575" target="_blank">ADIS16575</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16576" target="_blank">ADIS16576</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16577" target="_blank">ADIS16577</a></p></li>
</ul>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id41" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The ADIS1650X device series is a precision, miniature microelectromechanical
system (MEMS) inertial measurement unit (IMU) that includes a triaxial
gyroscope and a triaxial accelerometer. Each inertial sensor in the ADIS1650X
device series combines with signal conditioning that optimizes dynamic
performance.</p>
<p>The factory calibration characterizes each sensor for sensitivity, bias,
alignment, linear acceleration (gyroscope bias), and point of percussion
(accelerometer location). As a result, each sensor has dynamic compensation
formulas that provide accurate sensor measurements over a broad set of
conditions.</p>
</section>
<section id="applications">
<h2><a class="toc-backref" href="#id42" role="doc-backlink">Applications</a><a class="headerlink" href="#applications" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Navigation, stabilization, and instrumentation</p></li>
<li><p>Unmanned and autonomous vehicles</p></li>
<li><p>Smart agriculture and construction machinery</p></li>
<li><p>Factory/industrial automation, robotics</p></li>
<li><p>Virtual/augmented reality</p></li>
<li><p>Internet of Moving Things</p></li>
</ul>
</section>
<section id="adis-driver-source-code">
<h2><a class="toc-backref" href="#id43" role="doc-backlink">ADIS Driver Source Code</a><a class="headerlink" href="#adis-driver-source-code" title="Link to this heading"></a></h2>
<p>The source code for ADIS generic driver can be found here:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis.h" target="_blank">Header file of ADIS Generic Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis.c" target="_blank">Implementation of ADIS Generic Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis_internals.h" target="_blank">Header file of ADIS Internals</a></p></li>
</ul>
<p>The generic ADIS driver has to be used together with the chip-specific ADIS driver.
The source code for the supported chips is listed below:</p>
<p>ADIS1646X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1646x.h" target="_blank">Header file of ADIS1646X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1646x.c" target="_blank">Implementation of ADIS1646X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1646X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16465" target="_blank">ADIS16465</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16467" target="_blank">ADIS16467</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16470" target="_blank">ADIS16470</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16475" target="_blank">ADIS16475</a></p></li>
</ul>
<p>ADIS1647X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1647x.h" target="_blank">Header file of ADIS1647X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1647x.c" target="_blank">Implementation of ADIS1647X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1647X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16477" target="_blank">ADIS16477</a></p></li>
</ul>
<p>ADIS1650X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1650x.h" target="_blank">Header file of ADIS1650X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1650x.c" target="_blank">Implementation of ADIS1650X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1650X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16500" target="_blank">ADIS16500</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16501" target="_blank">ADIS16501</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16505" target="_blank">ADIS16505</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16507" target="_blank">ADIS16507</a></p></li>
</ul>
<p>ADIS1654X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1654x.h" target="_blank">Header file of ADIS1654X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1654x.c" target="_blank">Implementation of ADIS1654X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1654X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16545" target="_blank">ADIS16545</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16547" target="_blank">ADIS16547</a></p></li>
</ul>
<p>ADIS1655X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1655x.h" target="_blank">Header file of ADIS1655X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1655x.c" target="_blank">Implementation of ADIS1655X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1655X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16550" target="_blank">ADIS16550</a></p></li>
</ul>
<p>ADIS1657X Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1657x.h" target="_blank">Header file of ADIS1657X Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/adis1657x.c" target="_blank">Implementation of ADIS1657X Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1657X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16575" target="_blank">ADIS16575</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16576" target="_blank">ADIS16576</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16577" target="_blank">ADIS16577</a></p></li>
</ul>
</section>
<section id="adis-driver-usage-outside-of-no-os">
<h2><a class="toc-backref" href="#id44" role="doc-backlink">ADIS Driver Usage Outside of No-OS</a><a class="headerlink" href="#adis-driver-usage-outside-of-no-os" title="Link to this heading"></a></h2>
<p>In order to be able to use this driver you will have to provide the specific
implementation for the communication APIs and the specific types they use.
For SPI communication, there are four functions which are called by the ADIS
driver and have to be implemented:</p>
<ul class="simple">
<li><p><strong>no_os_spi_init()</strong> - initializes the communication peripheral.</p></li>
<li><p><strong>no_os_spi_write_and_read()</strong> - writes and reads data to/from the device.</p></li>
<li><p><strong>no_os_spi_transfer()</strong> - iterates over transfer lists and sends all SPI messages</p></li>
<li><p><strong>no_os_spi_remove()</strong> - de-initializes the communication peripheral.</p></li>
</ul>
<p>And there are three data types that have to be defined:</p>
<ul class="simple">
<li><p><strong>no_os_spi_desc</strong> - structure holding the SPI descriptor</p></li>
<li><p><strong>no_os_spi_init_param</strong> - structure holding the parameters for SPI initialization</p></li>
<li><p><strong>no_os_spi_msg</strong> - structure holding the description for a SPI transfer</p></li>
</ul>
<p>An example of a header file containing the prototypes of the functions which have
to be implemented, along with some generic data types they are using can be found
below:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/include/no_os_spi.h" target="_blank">Generic header file for SPI Communication APIs</a></p></li>
</ul>
<p>You will also have to provide specific APIs for GPIO handling. There are five
functions which are called by the ADIS driver and have to be implemented:</p>
<ul class="simple">
<li><p><strong>no_os_gpio_get_optional</strong> - returns the descriptor to a specific GPIO</p></li>
<li><p><strong>no_os_gpio_direction_output</strong> - enables the output direction of the specified GPIO descriptor</p></li>
<li><p><strong>no_os_gpio_set_value</strong> - sets the value of the specified GPIO to high or low</p></li>
<li><p><strong>no_os_gpio_remove</strong> - frees the resources allocated by no_os_gpio_get_optional</p></li>
</ul>
<p>And there are two data types that have to be defined:</p>
<ul class="simple">
<li><p><strong>no_os_gpio_desc</strong> - structure holding the GPIO descriptor</p></li>
<li><p><strong>no_os_gpio_init_param</strong> - structure holding the parameters for GPIO initialization</p></li>
</ul>
<p>An example of a header file containing the prototypes of the functions which have
to be implemented, along with some generic data types they are using can be found below:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/include/no_os_gpio.h" target="_blank">Generic header file for GPIO APIs</a></p></li>
</ul>
<p>The driver also uses the ADI util library, so make sure you also add the necessary
files in your project. The source code for the util library can be found here:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/include/no_os_util.h" target="_blank">Header file of ADI util library</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/util/no_os_util.c" target="_blank">Implementation file of ADI util library</a></p></li>
</ul>
</section>
<section id="adis-driver-usage-with-no-os">
<h2><a class="toc-backref" href="#id45" role="doc-backlink">ADIS Driver Usage with No-OS</a><a class="headerlink" href="#adis-driver-usage-with-no-os" title="Link to this heading"></a></h2>
<p>If you wish to use No-OS for evaluating ADIS devices, you may use the already
existing example projects:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1646x" target="_blank">ADIS1646X Example Projects</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1647x" target="_blank">ADIS1647X Example Projects</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1650x" target="_blank">ADIS1650X Example Projects</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1654x" target="_blank">ADIS1654X Example Projects</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1655x" target="_blank">ADIS1655X Example Projects</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/projects/eval-adis1657x" target="_blank">ADIS1657X Example Projects</a></p></li>
</ul>
</section>
<section id="adis-device-initialization">
<h2><a class="toc-backref" href="#id46" role="doc-backlink">ADIS Device Initialization</a><a class="headerlink" href="#adis-device-initialization" title="Link to this heading"></a></h2>
<p>In order to be able to use the device, you will have to provide the support for
the communication protocol and GPIO configuration as mentioned above. The first
API to be called is <strong>adis_init</strong> by providing the adis descriptor and the
adis1650x_chip_info. Make sure that it returns 0, which means that the driver
was initialized correctly.</p>
</section>
<section id="adis-device-measurements-register-readings">
<h2><a class="toc-backref" href="#id47" role="doc-backlink">ADIS Device Measurements - Register Readings</a><a class="headerlink" href="#adis-device-measurements-register-readings" title="Link to this heading"></a></h2>
<section id="acceleration-data">
<h3>Acceleration Data<a class="headerlink" href="#acceleration-data" title="Link to this heading"></a></h3>
<p>If you want to obtain a data set for each axis, you may use <strong>adis_read_x_accl</strong>,
<strong>adis_read_y_accl</strong> and <strong>adis_read_z_accl</strong> APIs to obtain the raw data.
The raw data does not have the scaling applied. Use <strong>adis_get_accl_scale</strong> to
obtain the acceleration scale.
The converted value meters / square second is obtained by the following formula:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>result<span class="w"> </span><span class="o">[</span>m<span class="w"> </span>/<span class="w"> </span>s^2<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>raw<span class="w"> </span>data<span class="w"> </span>*<span class="w"> </span>scale.dividend<span class="w"> </span>/<span class="w"> </span>scale.divisor
</pre></div>
</div>
</section>
<section id="gyroscope-data">
<h3>Gyroscope Data<a class="headerlink" href="#gyroscope-data" title="Link to this heading"></a></h3>
<p>If you want to obtain a data set for each axis, you may use <strong>adis_read_x_gyro</strong>,
<strong>adis_read_y_gyro</strong> and <strong>adis_read_z_gyro</strong> APIs to obtain the raw data.
The raw data does not have the scaling applied. Use <strong>adis_get_anglvel_scale</strong>
to obtain the gyroscope scale.
The converted value in radians / second is obtained by the following formula:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>result<span class="w"> </span><span class="o">[</span>rad<span class="w"> </span>/<span class="w"> </span>s<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>raw<span class="w"> </span>data<span class="w"> </span>*<span class="w"> </span>scale.dividend<span class="w"> </span>/<span class="w"> </span>scale.divisor
</pre></div>
</div>
</section>
<section id="delta-velocity-data">
<h3>Delta Velocity Data<a class="headerlink" href="#delta-velocity-data" title="Link to this heading"></a></h3>
<p>If you want to obtain a data set for each axis, you may use <strong>adis_read_x_deltvel</strong>,
<strong>adis_read_y_deltvel</strong> and <strong>adis_read_z_deltvel</strong> APIs to obtain the raw data.
The raw data does not have the scaling applied. Use <strong>adis_get_deltavelocity_scale</strong>
to obtain the delta velocity scale.
The converted value in meters / second is obtained by the following formula:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>result<span class="w"> </span><span class="o">[</span>m<span class="w"> </span>/<span class="w"> </span>s<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>raw<span class="w"> </span>data<span class="w"> </span>*<span class="w"> </span>scale.dividend<span class="w"> </span>/<span class="w"> </span>scale.divisor
</pre></div>
</div>
</section>
<section id="delta-angle-data">
<h3>Delta Angle Data<a class="headerlink" href="#delta-angle-data" title="Link to this heading"></a></h3>
<p>If you want to obtain a data set for each axis, you may use <strong>adis_read_x_deltang</strong>,
<strong>adis_read_y_deltang</strong> and <strong>adis_read_z_deltang</strong> APIs to obtain the raw data.
The raw data does not have the scaling applied. Use <strong>adis_get_deltaangl_scale</strong>
to obtain the delta angle scale.
The converted value in radians is obtained by the following formula:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>result<span class="w"> </span><span class="o">[</span>rad<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>raw<span class="w"> </span>data<span class="w"> </span>*<span class="w"> </span>scale.dividend<span class="w"> </span>/<span class="w"> </span>scale.divisor
</pre></div>
</div>
</section>
<section id="temperature-data">
<h3>Temperature Data<a class="headerlink" href="#temperature-data" title="Link to this heading"></a></h3>
<p>If you want to obtain the temperature data of the device, you may use
<strong>adis_read_temp_out</strong> API to obtain the raw data. The raw data does not have the
scaling applied. Use <strong>adis_get_temp_scale</strong>
to obtain the temperature scale.
The converted value in millidegrees Celsius is obtained by the following formula:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>result<span class="w"> </span><span class="o">[</span>milli<span class="w"> </span>°C<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>raw<span class="w"> </span>data<span class="w"> </span>*<span class="w"> </span>scale.dividend<span class="w"> </span>/<span class="w"> </span>scale.divisor
</pre></div>
</div>
</section>
</section>
<section id="adis-device-measurements-burst-readings">
<h2><a class="toc-backref" href="#id48" role="doc-backlink">ADIS Device Measurements - Burst Readings</a><a class="headerlink" href="#adis-device-measurements-burst-readings" title="Link to this heading"></a></h2>
<p>The burst read function provides a way to read a batch of output data registers.
If you want to perform a burst read, you may use <strong>adis_read_burst_data</strong> API.</p>
<p>You will have to provide the following parameters:</p>
<ul class="simple">
<li><p>adis descriptor pointer</p></li>
<li><p>buffer - the buffer to be filled with the read data. Sufficient memory has to be allocated, as described with buffer size.</p></li>
<li><p>buffer size - the size of the provided buffer, in bytes. The size of the provided buffer has to be at least 18 bytes if burst32 is false and at least 30 bytes if burst32 is true.</p></li>
<li><p>burst32 - true if 32-bit data is requested for accel and gyro or delta angle and delta velocity measurements, false if 16-bit data is requested. It is supported only by adis1647x, adis1650x and adis1657x devices.</p></li>
<li><p>burst_sel - 0 if accel and gyro data is requested, 1 if delta angle and delta velocity is requested. It is supported only by adis1647x, adis1650x and adis1657x devices.</p></li>
<li><p>fifo_pop - in case FIFO is supported, will send a fifo pop request if parameter value is true. If FIFO is not supported, this parameter is ignored. It is supported only by adis1657x devices.</p></li>
<li><p>burst_request - in case FIFO is supported, will send a burst request and -EAGAIN will be returned if the request has been sent successfully. With this request, no burst data is returned. This burst request is needed if the previous command sent to the device was not a burst read. If FIFO is not supported, this parameter is ignored. It is supported only by adis1657x devices.</p></li>
</ul>
<p>The buffer will contain the following data based on burst32 and burst_sel:</p>
<p>burst32 = false burst_sel = 0:</p>
<ul class="simple">
<li><p>bytes 0-1:   diagnosis register</p></li>
<li><p>bytes 2-3:   anglvel_x</p></li>
<li><p>bytes 4-5:   anglvel_y</p></li>
<li><p>bytes 6-7:   anglvel_z</p></li>
<li><p>bytes 8-9:   accel_x</p></li>
<li><p>bytes 10-11: accel_y</p></li>
<li><p>bytes 12-13: accel_z</p></li>
<li><p>bytes 14-15: temp0</p></li>
<li><p>bytes 16-17: data_cntr/timestamp</p></li>
</ul>
<p>burst32 = false burst_sel = 1:</p>
<ul class="simple">
<li><p>bytes 0-1:   diagnosis register</p></li>
<li><p>bytes 2-3:   deltaangl_x</p></li>
<li><p>bytes 4-5:   deltaangl_y</p></li>
<li><p>bytes 6-7:   deltaangl_z</p></li>
<li><p>bytes 8-9:   deltavelocity_x</p></li>
<li><p>bytes 10-11: deltavelocity_y</p></li>
<li><p>bytes 12-13: deltavelocity_z</p></li>
<li><p>bytes 14-15: temp0</p></li>
<li><p>bytes 16-17: data_cntr/timestamp</p></li>
</ul>
<p>burst32 = true burst_sel = 0:</p>
<ul class="simple">
<li><p>bytes 0-1:   diagnosis register</p></li>
<li><p>bytes 2-3:   anglvel_x lsb</p></li>
<li><p>bytes 4-5:   anglvel_x msb</p></li>
<li><p>bytes 6-7:   anglvel_y lsb</p></li>
<li><p>bytes 8-9:   anglvel_y msb</p></li>
<li><p>bytes 10-11: anglvel_z lsb</p></li>
<li><p>bytes 12-13: anglvel_z msb</p></li>
<li><p>bytes 14-15: accel_x lsb</p></li>
<li><p>bytes 16-17: accel_x msb</p></li>
<li><p>bytes 18-19: accel_y lsb</p></li>
<li><p>bytes 20-21: accel_y msb</p></li>
<li><p>bytes 22-23: accel_z lsb</p></li>
<li><p>bytes 24-25: accel_z msb</p></li>
<li><p>bytes 26-27: temp0</p></li>
<li><p>bytes 28-29: data_cntr/timestamp</p></li>
</ul>
<p>burst32 = true burst_sel = 0:</p>
<ul class="simple">
<li><p>bytes 0-1:   diagnosis register</p></li>
<li><p>bytes 2-3:   deltaangl_x lsb</p></li>
<li><p>bytes 4-5:   deltaangl_x msb</p></li>
<li><p>bytes 6-7:   deltaangl_y lsb</p></li>
<li><p>bytes 8-9:   deltaangl_y msb</p></li>
<li><p>bytes 10-11: deltaangl_z lsb</p></li>
<li><p>bytes 12-13: deltaangl_z msb</p></li>
<li><p>bytes 14-15: deltavelocity_x lsb</p></li>
<li><p>bytes 16-17: deltavelocity_x msb</p></li>
<li><p>bytes 18-19: deltavelocity_y lsb</p></li>
<li><p>bytes 20-21: deltavelocity_y msb</p></li>
<li><p>bytes 22-23: deltavelocity_z lsb</p></li>
<li><p>bytes 24-25: deltavelocity_z msb</p></li>
<li><p>bytes 26-27: temp0</p></li>
<li><p>bytes 28-29: data_cntr/timestamp</p></li>
</ul>
</section>
<section id="adis-diagnosis-data">
<h2><a class="toc-backref" href="#id49" role="doc-backlink">ADIS Diagnosis Data</a><a class="headerlink" href="#adis-diagnosis-data" title="Link to this heading"></a></h2>
<p>If you want to obtain the diagnosis data of the device, you may use
<strong>adis_read_diag_stat</strong> API to obtain the diagnosis flags structure. You may also
use individual APIs for each diagnosis flag to obtain the individual value. The
APIs for retrieving diagnosis flags are specific to the device, as shown below.</p>
<section id="common">
<h3>Common<a class="headerlink" href="#common" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>adis_read_diag_data_path_overrun</strong> - to obtain the data path overrun flag value</p></li>
<li><p><strong>adis_read_diag_fls_mem_update_failure</strong> - to obtain the flash memory update error flag value</p></li>
<li><p><strong>adis_read_diag_spi_comm_err</strong> - to obtain the SPI communication error flag value</p></li>
<li><p><strong>adis_read_diag_standby_mode</strong> - to obtain the standby mode flag value</p></li>
<li><p><strong>adis_read_diag_snsr_failure</strong> - to obtain the sensor self test error flag value</p></li>
<li><p><strong>adis_read_diag_mem_failure</strong> - to obtain the flash memory test error flag value</p></li>
<li><p><strong>adis_read_diag_clk_err</strong> - to obtain the clock error flag value</p></li>
<li><p><strong>adis_read_diag_checksum_err</strong> - to obtain the checksum error flag value from a previous burst read</p></li>
<li><p><strong>adis_read_diag_fls_mem_wr_cnt_exceed</strong> - to obtain the flash memory write counts exceeded flag value (set to true if the flash memory write counter exceeds the endurance value</p></li>
<li><p><strong>adis_read_diag_stat</strong> - to obtain all error flags</p></li>
</ul>
</section>
<section id="adis1646x">
<h3>ADIS1646X<a class="headerlink" href="#adis1646x" title="Link to this heading"></a></h3>
<p>There are no other specific diagnosis flags for this chip version.</p>
</section>
<section id="adis1647x">
<h3>ADIS1647X<a class="headerlink" href="#adis1647x" title="Link to this heading"></a></h3>
<p>There are no other specific diagnosis flags for this chip version.</p>
</section>
<section id="adis1650x">
<h3>ADIS1650X<a class="headerlink" href="#adis1650x" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>adis_read_diag_gyro1_failure</strong> - to obtain the gyroscope1 self test error flag value</p></li>
<li><p><strong>adis_read_diag_gyro2_failure</strong> - to obtain the gyroscope2 self test error flag value</p></li>
<li><p><strong>adis_read_diag_accl_failure</strong> - to obtain the accelerometer self test error flag value</p></li>
</ul>
</section>
<section id="adis1657x">
<h3>ADIS1657X<a class="headerlink" href="#adis1657x" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>adis_read_diag_snsr_init_failure</strong> - to obtain the sensor initialization failure flag value</p></li>
<li><p><strong>adis_read_diag_x_axis_gyro_failure</strong> - to obtain the X-Axis Gyroscope failure flag value</p></li>
<li><p><strong>adis_read_diag_y_axis_gyro_failure</strong> - to obtain the Y-Axis Gyroscope failure flag value</p></li>
<li><p><strong>adis_read_diag_z_axis_gyro_failure</strong> - to obtain the Z-Axis Gyroscope failure flag value</p></li>
<li><p><strong>adis_read_diag_x_axis_accl_failure</strong> - to obtain the X-Axis Accelerometer failure flag value</p></li>
<li><p><strong>adis_read_diag_y_axis_accl_failure</strong> - to obtain the Y-Axis Accelerometer failure flag value</p></li>
<li><p><strong>adis_read_diag_z_axis_accl_failure</strong> - to obtain the Z-Axis Accelerometer failure flag value</p></li>
<li><p><strong>adis_read_diag_aduc_mcu_fault</strong> - to obtain the ADuC microcontroller fault flag value</p></li>
</ul>
</section>
</section>
<section id="adis-identification-data">
<h2><a class="toc-backref" href="#id50" role="doc-backlink">ADIS Identification Data</a><a class="headerlink" href="#adis-identification-data" title="Link to this heading"></a></h2>
<p>If you want to obtain identification data specific to the device, you may use the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_read_prod_id</strong> - to obtain the product id</p></li>
<li><p><strong>adis_read_serial_num</strong> - to obtain the product serial number</p></li>
<li><p><strong>adis_read_firm_rev</strong> - to obtain the firmware revision</p></li>
<li><p><strong>adis_read_firm_d</strong>, <strong>adis_read_firm_m</strong> and <strong>adis_read_firm_y</strong> - to obtain the firmware date</p></li>
<li><p><strong>adis_read_gyro_meas_range</strong> to obtain gyroscope measurement range encoded value</p></li>
</ul>
</section>
<section id="adis-configuration-data">
<h2><a class="toc-backref" href="#id51" role="doc-backlink">ADIS Configuration Data</a><a class="headerlink" href="#adis-configuration-data" title="Link to this heading"></a></h2>
<section id="accelerometer-calibration-offset">
<h3>Accelerometer calibration offset<a class="headerlink" href="#accelerometer-calibration-offset" title="Link to this heading"></a></h3>
<p>If you want to configure the accelerometer calibration offset on any axis, you may use the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_write_xa_bias</strong></p></li>
<li><p><strong>adis_write_ya_bias</strong></p></li>
<li><p><strong>adis_write_za_bias</strong></p></li>
</ul>
<p>If you want to read the current accelerometer calibration on any axis, you may use the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_read_xa_bias</strong></p></li>
<li><p><strong>adis_read_ya_bias</strong></p></li>
<li><p><strong>adis_read_za_bias</strong></p></li>
</ul>
</section>
<section id="gyroscope-calibration-offset">
<h3>Gyroscope calibration offset<a class="headerlink" href="#gyroscope-calibration-offset" title="Link to this heading"></a></h3>
<p>If you want to configure the gyroscope calibration offset on any axis, you may use the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_write_xg_bias</strong></p></li>
<li><p><strong>adis_write_yg_bias</strong></p></li>
<li><p><strong>adis_write_zg_bias</strong></p></li>
</ul>
<p>If you want to read the current gyroscope calibration on any axis, you may use the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_read_xg_bias</strong></p></li>
<li><p><strong>adis_read_yg_bias</strong></p></li>
<li><p><strong>adis_read_zg_bias</strong></p></li>
</ul>
</section>
<section id="filters-configuration">
<h3>Filters configuration<a class="headerlink" href="#filters-configuration" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>adis_write_filt_size_var_b</strong>, <strong>adis_read_filt_size_var_b</strong> - Bartlett window FIR filter write/read APIs</p></li>
<li><p><strong>adis_write_dec_rate</strong>, <strong>adis_read_dec_rate</strong> - decimation filter write/read APIs</p></li>
<li><p><strong>adis_write_up_scale</strong>, <strong>adis_read_up_scale</strong> - scale factor for input clock for scaled sync mode write/read APIs</p></li>
</ul>
</section>
<section id="continuous-bias-estimation-configuration">
<h3>Continuous Bias Estimation Configuration<a class="headerlink" href="#continuous-bias-estimation-configuration" title="Link to this heading"></a></h3>
<p>Some devices offer continuous bias estimation configuration capabilities.
See the information below to view the configuration APIs for the devices which
offer continuous bias estimation capabilities.</p>
<p><strong>ADIS1646X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_bias_corr_tbc</strong>, <strong>adis_read_bias_corr_tbc</strong> - to write/read the time base control value</p></li>
<li><p><strong>adis_write_bias_corr_en_xg</strong>, <strong>adis_read_bias_corr_en_xg</strong> - to write/read the X-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_yg</strong>, <strong>adis_read_bias_corr_en_yg</strong> - to write/read the Y-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_zg</strong>, <strong>adis_read_bias_corr_en_zg</strong> - to write/read the Z-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_xa</strong>, <strong>adis_read_bias_corr_en_xa</strong> - to write/read the X-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_ya</strong>, <strong>adis_read_bias_corr_en_ya</strong> - to write/read the Y-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_za</strong>, <strong>adis_read_bias_corr_en_za</strong> - to write/read the Z-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1647X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_bias_corr_tbc</strong>, <strong>adis_read_bias_corr_tbc</strong> - to write/read the time base control value</p></li>
<li><p><strong>adis_write_bias_corr_en_xg</strong>, <strong>adis_read_bias_corr_en_xg</strong> - to write/read the X-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_yg</strong>, <strong>adis_read_bias_corr_en_yg</strong> - to write/read the Y-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_zg</strong>, <strong>adis_read_bias_corr_en_zg</strong> - to write/read the Z-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_xa</strong>, <strong>adis_read_bias_corr_en_xa</strong> - to write/read the X-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_ya</strong>, <strong>adis_read_bias_corr_en_ya</strong> - to write/read the Y-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_za</strong>, <strong>adis_read_bias_corr_en_za</strong> - to write/read the Z-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1650X</strong></p>
<blockquote>
<div><p>This device does not offer continuous bias estimation capabilities.</p>
</div></blockquote>
<p><strong>ADIS1657X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_bias_corr_tbc</strong>, <strong>adis_read_bias_corr_tbc</strong> - to write/read the time base control value</p></li>
<li><p><strong>adis_write_bias_corr_en_xg</strong>, <strong>adis_read_bias_corr_en_xg</strong> - to write/read the X-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_yg</strong>, <strong>adis_read_bias_corr_en_yg</strong> - to write/read the Y-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_zg</strong>, <strong>adis_read_bias_corr_en_zg</strong> - to write/read the Z-axis gyroscope bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_xa</strong>, <strong>adis_read_bias_corr_en_xa</strong> - to write/read the X-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_ya</strong>, <strong>adis_read_bias_corr_en_ya</strong> - to write/read the Y-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
<li><p><strong>adis_write_bias_corr_en_za</strong>, <strong>adis_read_bias_corr_en_za</strong> - to write/read the Z-axis accelerometer bias correction enable bit (0 - disabled, 1 - enabled)</p></li>
</ul>
</div></blockquote>
</section>
<section id="fifo-configuration">
<h3>FIFO Configuration<a class="headerlink" href="#fifo-configuration" title="Link to this heading"></a></h3>
<p>Some devices offer a hardware FIFO and offer configuration capabilities for
the FIFO. See the information below to view the FIFO configuration APIs for the
devices which have a hardware FIFO.</p>
<p><strong>ADIS1646X</strong></p>
<blockquote>
<div><p>This device does not offer a hardware FIFO.</p>
</div></blockquote>
<p><strong>ADIS1647X</strong></p>
<blockquote>
<div><p>This device does not offer a hardware FIFO.</p>
</div></blockquote>
<p><strong>ADIS1650X</strong></p>
<blockquote>
<div><p>This device does not offer a hardware FIFO.</p>
</div></blockquote>
<p><strong>ADIS1657X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_fifo_en</strong>, <strong>adis_read_fifo_en</strong> - to write/read the FIFO enable bit (0 - direct output mode, 1 - FIFO output mode)</p></li>
<li><p><strong>adis_write_fifo_overflow</strong>, <strong>adis_read_fifo_overflow</strong> - to write/read the FIFO overflow behavior bit (0 - stop enqueuing samples, 1 - overwrite the oldest sample)</p></li>
<li><p><strong>adis_write_fifo_wm_int_en</strong>, <strong>adis_read_fifo_wm_int_en</strong> - to write/read the FIFO watermark interrupt enable bit (0 - watermark interrupt disabled, 1 - watermark interrupt enabled)</p></li>
<li><p><strong>adis_write_fifo_wm_int_pol</strong>, <strong>adis_read_fifo_wm_int_pol</strong> - to write/read the FIFO watermark interrupt polarity (0 - active low, 1 - active high)</p></li>
<li><p><strong>adis_write_fifo_wm_lvl</strong>, <strong>adis_read_fifo_wm_lvl</strong> - to write/read the number of samples which must be enqueued into the FIFO to trigger the watermark interrupt</p></li>
<li><p><strong>adis_read_fifo_cnt</strong> - to read the current number of samples in the FIFO</p></li>
</ul>
</div></blockquote>
</section>
<section id="miscellaneous-configuration">
<h3>Miscellaneous configuration<a class="headerlink" href="#miscellaneous-configuration" title="Link to this heading"></a></h3>
<p><strong>Common</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_dr_polarity</strong>, <strong>adis_read_dr_polarity</strong> - data ready polarity encoded value write/read APIs</p></li>
<li><p><strong>adis_write_sync_polarity</strong>, <strong>adis_read_sync_polarity</strong> - sync polarity encoded value write/read APIs</p></li>
<li><p><strong>adis_write_sync_mode</strong>, <strong>adis_read_sync_mode</strong> - synchronization mode encoded value write/read APIs</p></li>
<li><p><strong>adis_write_pt_of_perc_algnmt</strong>, <strong>adis_read_pt_of_perc_algnmt</strong> - write/read APIs for point of percussion alignment enable bit (1 -enabled, 0 - disabled)</p></li>
<li><p><strong>adis_write_linear_accl_comp</strong>, <strong>adis_read_linear_accl_comp</strong> - write/read APIs for linear acceleration compensation enable bit (1 -enabled, 0 - disabled)</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1646X</strong></p>
<blockquote>
<div><p>There are no other specific APIs for miscellaneous configuration for this chip version.</p>
</div></blockquote>
<p><strong>ADIS1647X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_burst_sel</strong>, <strong>adis_read_burst_sel</strong> - write/read APIs for burst selection encoded value (0 - acceleration and angular velocity, 1 - delta velocity and delta angle)</p></li>
<li><p><strong>adis_write_burst32</strong>, <strong>adis_read_burst32</strong> - write/read APIs for burst32 enable bit (0 - for 16-bit burst data, 1 - for 32-bit burst data)</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1650X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_sens_bw</strong>, <strong>adis_read_sens_bw</strong> - sensor bandwidth encoded value write/read APIs</p></li>
<li><p><strong>adis_write_burst_sel</strong>, <strong>adis_read_burst_sel</strong> - write/read APIs for burst selection encoded value (0 - acceleration and angular velocity, 1 - delta velocity and delta angle)</p></li>
<li><p><strong>adis_write_burst32</strong>, <strong>adis_read_burst32</strong> - write/read APIs for burst32 enable bit (0 - for 16-bit burst data, 1 - for 32-bit burst data)</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1657X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_write_sens_bw</strong>, <strong>adis_read_sens_bw</strong> - sensor bandwidth encoded value write/read APIs</p></li>
<li><p><strong>adis_write_burst_sel</strong>, <strong>adis_read_burst_sel</strong> - write/read APIs for burst selection encoded value (0 - acceleration and angular velocity, 1 - delta velocity and delta angle)</p></li>
<li><p><strong>adis_write_burst32</strong>, <strong>adis_read_burst32</strong> - write/read APIs for burst32 enable bit (0 - for 16-bit burst data, 1 - for 32-bit burst data)</p></li>
<li><p><strong>adis_write_timestamp32</strong>, <strong>adis_read_timestamp32</strong> - write/read APIs for timestamp32 enable bit (0 - for 16-bit timestamp, 1 - for 32-bit timestamp)</p></li>
<li><p><strong>adis_write_sync_4khz</strong>, <strong>adis_read_sync_4khz</strong> - write/read APIs for 4KHz internal sync enable bit (0 - for 2KHz internal sync, 1 - for 4KHz internal sync)</p></li>
</ul>
</div></blockquote>
</section>
<section id="adis-commands">
<h3>ADIS Commands<a class="headerlink" href="#adis-commands" title="Link to this heading"></a></h3>
<p><strong>Common</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_cmd_fact_calib_restore</strong> - to perform factory calibration restore command</p></li>
<li><p><strong>adis_cmd_snsr_self_test</strong> - to perform sensor self test command</p></li>
<li><p><strong>adis_cmd_fls_mem_update</strong> - to perform flash memory update command</p></li>
<li><p><strong>adis_cmd_fls_mem_test</strong> - to perform flash memory test command</p></li>
<li><p><strong>adis_cmd_sw_res</strong> - to perform software reset command</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1646X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_cmd_bias_corr_update</strong> - to perform bias correction update command</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1647X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_cmd_bias_corr_update</strong> - to perform bias correction update command</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1650X</strong></p>
<blockquote>
<div><p>There are no other specific APIs for ADIS commands for this chip version.</p>
</div></blockquote>
<p><strong>ADIS1657X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_cmd_bias_corr_update</strong> - to perform bias correction update command</p></li>
<li><p><strong>adis_cmd_fifo_flush</strong> - to perform fifo flush command</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="adis-read-only-registers">
<h2><a class="toc-backref" href="#id52" role="doc-backlink">ADIS read-only registers</a><a class="headerlink" href="#adis-read-only-registers" title="Link to this heading"></a></h2>
<p><strong>Common</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_read_time_stamp</strong> - reads the current sample time stamp</p></li>
<li><p><strong>adis_read_data_cntr</strong> - reads the current sample data counter</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1650X</strong></p>
<blockquote>
<div><p>There are no other APIs for this chip version.</p>
</div></blockquote>
<p><strong>ADIS1657X</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>adis_read_spi_chksum</strong> - reads current sample SPI transaction checksum</p></li>
</ul>
</div></blockquote>
</section>
<section id="adis-scratch-pad-registers">
<h2><a class="toc-backref" href="#id53" role="doc-backlink">ADIS scratch pad registers</a><a class="headerlink" href="#adis-scratch-pad-registers" title="Link to this heading"></a></h2>
<p>In order to perform read/write operations for device scratch pad registers use
the following APIs:</p>
<ul class="simple">
<li><p><strong>adis_write_usr_scr_1</strong>, <strong>adis_read_usr_scr_1</strong> - write/read APIs for scratch pad register 1</p></li>
<li><p><strong>adis_write_usr_scr_2</strong>, <strong>adis_read_usr_scr_2</strong> - write/read APIs for scratch pad register 2</p></li>
<li><p><strong>adis_write_usr_scr_3</strong>, <strong>adis_read_usr_scr_3</strong> - write/read APIs for scratch pad register 3</p></li>
</ul>
</section>
<section id="adis-driver-initialization-example">
<h2><a class="toc-backref" href="#id54" role="doc-backlink">ADIS Driver Initialization Example</a><a class="headerlink" href="#adis-driver-initialization-example" title="Link to this heading"></a></h2>
<section id="id14">
<h3>ADIS1646X<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1646x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1646x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1646x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16465_1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1646x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1646x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1646x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</section>
<section id="id15">
<h3>ADIS1647X<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1647x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1647x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1647x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16477_1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1647x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1647x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1647x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>ADIS1650X<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1650x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1650x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1650x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16505_2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1650x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1650x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1650x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</section>
<section id="adis1654x">
<h3>ADIS1654X<a class="headerlink" href="#adis1654x" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1654x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1654x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1654x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_DEFAULT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16545_3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1654x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1654x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1654x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="adis1655x">
<h3>ADIS1655X<a class="headerlink" href="#adis1655x" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1655x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1655x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1655x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_DEFAULT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16550</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1655x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1655x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1655x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>ADIS1657X<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1657x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1657x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1657x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16577_3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1657x_desc</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

<span class="n">adis1657x_chip_info</span><span class="p">.</span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_ip</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_chip_info</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_gyro</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_gyro</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_gyro</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_x_accl</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_y_accl</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_z_accl</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis_read_temp_out</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>

<span class="nl">error</span><span class="p">:</span>
<span class="w">        </span><span class="n">adis_remove</span><span class="p">(</span><span class="n">adis1657x_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</section>
</section>
<section id="adis-iio-driver-source-code">
<h2><a class="toc-backref" href="#id55" role="doc-backlink">ADIS IIO Driver Source Code</a><a class="headerlink" href="#adis-iio-driver-source-code" title="Link to this heading"></a></h2>
<p>The IIO ADIS driver comes on top of ADIS driver and offers support for interfacing
IIO clients through IIO lib.</p>
<p>The source code for ADIS generic driver can be found here:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis_internals.h" target="_blank">Header file of ADIS IIO Driver Internals</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis.c" target="_blank">Implementation of ADIS Generic IIO Driver</a></p></li>
</ul>
<p>The generic ADIS driver has to be used together with the chip-specific ADIS driver.
The source code for the supported chips is listed below:</p>
<p>ADIS1646X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1646x.h" target="_blank">Header file of ADIS1646X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1646x.c" target="_blank">Implementation of ADIS1646X IIO Driver</a></p></li>
</ul>
<p>Supported devices with IIO ADIS1646X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16465" target="_blank">ADIS16465</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16467" target="_blank">ADIS16467</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16470" target="_blank">ADIS16470</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16475" target="_blank">ADIS16475</a></p></li>
</ul>
<p>ADIS1647X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1647x.h" target="_blank">Header file of ADIS1647X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1647x.c" target="_blank">Implementation of ADIS1647X IIO Driver</a></p></li>
</ul>
<p>Supported devices with IIO ADIS1646X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16477" target="_blank">ADIS16477</a></p></li>
</ul>
<p>ADIS1650X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1650x.h" target="_blank">Header file of ADIS1650X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1650x.c" target="_blank">Implementation of ADIS1650X IIO Driver</a></p></li>
</ul>
<p>Supported devices with IIO ADIS1650X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16500" target="_blank">ADIS16500</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16501" target="_blank">ADIS16501</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16505" target="_blank">ADIS16505</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16507" target="_blank">ADIS16507</a></p></li>
</ul>
<p>ADIS1654X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1654x.h" target="_blank">Header file of ADIS1654X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1654x.c" target="_blank">Implementation of ADIS1654X IIO Driver</a></p></li>
</ul>
<p>Supported devices with IIO ADIS1654X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16545" target="_blank">ADIS16545</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16547" target="_blank">ADIS16547</a></p></li>
</ul>
<p>ADIS1655X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1655x.h" target="_blank">Header file of ADIS1655X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1655x.c" target="_blank">Implementation of ADIS1655X IIO Driver</a></p></li>
</ul>
<p>Supported devices with IIO ADIS1655X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16550" target="_blank">ADIS16550</a></p></li>
</ul>
<p>ADIS1657X IIO Driver Source Code:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1657x.h" target="_blank">Header file of ADIS1657X IIO Driver</a></p></li>
<li><p><a class="icon link reference external" href="https://github.com/analogdevicesinc/no-OS/blob/main/drivers/imu/iio_adis1657x.c" target="_blank">Implementation of ADIS1657X IIO Driver</a></p></li>
</ul>
<p>Supported devices with ADIS1657X files:</p>
<ul class="simple">
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16575" target="_blank">ADIS16575</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16576" target="_blank">ADIS16576</a></p></li>
<li><p><a class="icon link reference external" href="https://www.analog.com/ADIS16577" target="_blank">ADIS16577</a></p></li>
</ul>
</section>
<section id="iio-adis-device-configuration">
<h2><a class="toc-backref" href="#id56" role="doc-backlink">IIO ADIS Device Configuration</a><a class="headerlink" href="#iio-adis-device-configuration" title="Link to this heading"></a></h2>
<section id="device-attributes">
<h3>Device Attributes<a class="headerlink" href="#device-attributes" title="Link to this heading"></a></h3>
<p>The generic IIO ADIS device has the following device specific attributes:</p>
<ul class="simple">
<li><p><strong>filter_low_pass_3db_frequency</strong> - which allows the configuration of the ADIS Bartlett window FIR filter</p></li>
<li><p><strong>sampling_frequency</strong> - which allows the configuration of the ADIS sampling frequency</p></li>
</ul>
</section>
<section id="device-channels">
<h3>Device Channels<a class="headerlink" href="#device-channels" title="Link to this heading"></a></h3>
<p>The generic IIO ADIS device has 0 output channels and 14 input channels:
3 angular velocity channels, 3 acceleration channels, 3 rotation channels,
3 velocity channels, 1 temperature channel and 1 counter channel.</p>
<p><strong>Angular Velocity Channels</strong></p>
<blockquote>
<div><p>The angular velocity channels are:</p>
<ul class="simple">
<li><p>Channel 0: <strong>anglvel_x</strong></p></li>
<li><p>Channel 1: <strong>anglvel_y</strong></p></li>
<li><p>Channel 2: <strong>anglvel_z</strong></p></li>
</ul>
<p>Each angular velocity channel has 3 attributes:</p>
<ul class="simple">
<li><p><strong>calibbias</strong> - calibration offset correction</p></li>
<li><p><strong>raw</strong> - the raw angular velocity value read from the device</p></li>
<li><p><strong>scale</strong> - the scale that has to be applied to the raw value in order to obtain the converted real value in rot/s, it has a constant value which is chip-specific</p></li>
</ul>
</div></blockquote>
<p><strong>Acceleration Channels</strong></p>
<blockquote>
<div><p>The acceleration channels are:</p>
<ul class="simple">
<li><p>Channel 3: <strong>accel_x</strong></p></li>
<li><p>Channel 4: <strong>accel_y</strong></p></li>
<li><p>Channel 5: <strong>accel_z</strong></p></li>
</ul>
<p>Each acceleration channel has 3 attributes:</p>
<ul class="simple">
<li><p><strong>calibbias</strong> - calibration offset correction</p></li>
<li><p><strong>raw</strong> - the raw acceleration value read from the device</p></li>
<li><p><strong>scale</strong> - the scale that has to be applied to the raw value in order to obtain the converted real value in m/s^2, it has a constant value which is chip-specific</p></li>
</ul>
</div></blockquote>
<p><strong>Temperature Channel</strong></p>
<blockquote>
<div><p>The temperature channel is:</p>
<ul class="simple">
<li><p>Channel 6: <strong>temp0</strong></p></li>
</ul>
<p>The temperature channel has 2 attributes:</p>
<ul class="simple">
<li><p><strong>raw</strong> - the raw temperature value read from the device</p></li>
<li><p><strong>scale</strong> - the scale that has to be applied to the raw value in order to obtain the converted real value in millidegrees Celsius, it has a constant value which is chip-specific</p></li>
</ul>
</div></blockquote>
<p><strong>Delta Angle Channels</strong></p>
<blockquote>
<div><p>The delta angle channels are:</p>
<ul class="simple">
<li><p>Channel 7: <strong>deltaangl_x</strong></p></li>
<li><p>Channel 8: <strong>deltaangl_y</strong></p></li>
<li><p>Channel 9: <strong>deltaangl_z</strong></p></li>
</ul>
<p>Each rotation channel has 2 attributes:</p>
<ul class="simple">
<li><p><strong>raw</strong> - the raw delta angle value read from the device</p></li>
<li><p><strong>scale</strong> - the scale that has to be applied to the raw value in order to obtain the converted real value in radians, it has a constant value which is chip-specific</p></li>
</ul>
</div></blockquote>
<p><strong>Delta Velocity Channels</strong></p>
<blockquote>
<div><p>The delta velocity channels are:</p>
<ul class="simple">
<li><p>Channel 10: <strong>deltavelocity_x</strong></p></li>
<li><p>Channel 11: <strong>deltavelocity_y</strong></p></li>
<li><p>Channel 12: <strong>deltavelocity_z</strong></p></li>
</ul>
<p>Each delta velocity channel has 2 attributes:</p>
<ul class="simple">
<li><p><strong>raw</strong> - the raw delta velocity value read from the device</p></li>
<li><p><strong>scale</strong> - the scale that has to be applied to the raw value in order to obtain the converted real value in m/s, it has a constant value which is chip-specific</p></li>
</ul>
</div></blockquote>
</section>
<section id="device-debug-attributes">
<h3>Device Debug Attributes<a class="headerlink" href="#device-debug-attributes" title="Link to this heading"></a></h3>
<p>The IIO driver offers the possibility to configure the device and to retrieve
diagnosis and configuration data from the device using debug attributes.
The following list of debug attributes is available:</p>
<p><strong>Common</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Debug Attribute Name</p></td>
<td><p>Access Type</p></td>
<td><p>Debug Attribute Description</p></td>
<td><p>Debug Attribute Valid Values</p></td>
</tr>
<tr class="row-even"><td><p>diag_data_path_overrun</p></td>
<td><p>Read-only</p></td>
<td><p>Data Path Overrun Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_flash_memory_update_error</p></td>
<td><p>Read-only</p></td>
<td><p>Flash Memory Update Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_spi_communication_error</p></td>
<td><p>Read-only</p></td>
<td><p>SPI Communication Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_standby_mode</p></td>
<td><p>Read-only</p></td>
<td><p>Standby Mode Flag</p></td>
<td><p>0 - device is in processing mode, 1 - device is in standby mode (not enough voltage supplied)</p></td>
</tr>
<tr class="row-even"><td><p>diag_sensor_self_test_error</p></td>
<td><p>Read-only</p></td>
<td><p>Sensor Self Test Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_flash_memory_test_error</p></td>
<td><p>Read-only</p></td>
<td><p>Flash Memory Test Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_clock_error</p></td>
<td><p>Read-only</p></td>
<td><p>Clock Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_checksum_error_flag</p></td>
<td><p>Read-only</p></td>
<td><p>SPI Checksum Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_flash_memory_write_count_exceeded_error</p></td>
<td><p>Read-only</p></td>
<td><p>Flash Memory Write Counts Exceeded Flag Error</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>lost_samples_count</p></td>
<td><p>Read-only</p></td>
<td><p>The number of lost samples during the previous buffer read command</p></td>
<td><p>0 - 4294967295</p></td>
</tr>
<tr class="row-even"><td><p>time_stamp</p></td>
<td><p>Read-only</p></td>
<td><p>The TIME_STAMP register value</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-odd"><td><p>data_counter</p></td>
<td><p>Read-only</p></td>
<td><p>The DATA_CNTR register value</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-even"><td><p>filter_size</p></td>
<td><p>Read/Write</p></td>
<td><p>The FILT_CTRL register value</p></td>
<td><p>0 - 6</p></td>
</tr>
<tr class="row-odd"><td><p>gyroscope_measurement_range</p></td>
<td><p>Read-only</p></td>
<td><p>The measurement range identifier</p></td>
<td><p>chip specific value with format &quot;+/-###_degrees_per_sec&quot;</p></td>
</tr>
<tr class="row-even"><td><p>data_ready_polarity Read/Write</p></td>
<td><p>Read/Write</p></td>
<td><p>Data Ready Pin Polarity Encoded Value</p></td>
<td><p>0 - active low, 1 - active high</p></td>
</tr>
<tr class="row-odd"><td><p>sync_polarity</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Pin Polarity Encoded Value</p></td>
<td><p>0 - active low, 1 - active high</p></td>
</tr>
<tr class="row-even"><td><p>point_of_percussion_alignment</p></td>
<td><p>Read/Write</p></td>
<td><p>Point Of Percussion Alignment Enable Bit</p></td>
<td><p>0 - disabled, 1 - enabled</p></td>
</tr>
<tr class="row-odd"><td><p>linear_acceleration_compensation</p></td>
<td><p>Read/Write</p></td>
<td><p>Linear Acceleration Compensation Enable Bit</p></td>
<td><p>0 - disabled, 1 - enabled</p></td>
</tr>
<tr class="row-even"><td><p>sync_signal_scale</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Input Frequency Multiplier Register Value</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-odd"><td><p>factory_calibration_restore</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a factory calibration restore command</p></td>
<td><p>Any written value will trigger a factory calibration restore command on the device</p></td>
</tr>
<tr class="row-even"><td><p>sensor_self_test</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a self test command</p></td>
<td><p>Any written value will trigger a self test command on the device</p></td>
</tr>
<tr class="row-odd"><td><p>flash_memory_update</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a flash memory update command</p></td>
<td><p>Any written value will trigger a flash memory update command on the device</p></td>
</tr>
<tr class="row-even"><td><p>flash_memory_test</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a flash memory test command</p></td>
<td><p>Any written value will trigger a flash memory test command on the device</p></td>
</tr>
<tr class="row-odd"><td><p>software_reset</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a software reset command</p></td>
<td><p>Any written value will trigger a software reset command on the device</p></td>
</tr>
<tr class="row-even"><td><p>firmware_revision</p></td>
<td><p>Read-only</p></td>
<td><p>The firmware revision value</p></td>
<td><p>String containing the firmware revision in the following format ##.##</p></td>
</tr>
<tr class="row-odd"><td><p>firmware_date</p></td>
<td><p>Read-only</p></td>
<td><p>The firmware date</p></td>
<td><p>String containing the firmware date in the following format mm-dd-yyyy</p></td>
</tr>
<tr class="row-even"><td><p>product_id</p></td>
<td><p>Read-only</p></td>
<td><p>The product id</p></td>
<td><p>Chip specific product id, e.g. 16505, 16575, 16576, 16577, etc.)</p></td>
</tr>
<tr class="row-odd"><td><p>serial_number</p></td>
<td><p>Read-only</p></td>
<td><p>The serial number</p></td>
<td><p>The serial number of the chip - hexadecimal format</p></td>
</tr>
<tr class="row-even"><td><p>scratch_pad_register1</p></td>
<td><p>Read/Write</p></td>
<td><p>The scratch path register 1</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-odd"><td><p>scratch_pad_register2</p></td>
<td><p>Read/Write</p></td>
<td><p>The scratch path register 2</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-even"><td><p>scratch_pad_register3</p></td>
<td><p>Read/Write</p></td>
<td><p>The scratch path register 3</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-odd"><td><p>flash_count</p></td>
<td><p>Read-only</p></td>
<td><p>The number of the flash writes performed on the device</p></td>
<td><p>0 - 65535</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>ADIS1646X</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Debug Attribute Name</p></td>
<td><p>Access Type</p></td>
<td><p>Debug Attribute Description</p></td>
<td><p>Debug Attribute Valid Values</p></td>
</tr>
<tr class="row-even"><td><p>bias_correction_time_base_control</p></td>
<td><p>Read/Write</p></td>
<td><p>Bias Correction Time Base Control Value</p></td>
<td><p>0 - 12</p></td>
</tr>
<tr class="row-odd"><td><p>x_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>y_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>z_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>x_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>y_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>z_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>bias_correction_update</p></td>
<td><p>Write-only</p></td>
<td><p>Trigger a bias correction update command</p></td>
<td><p>Any written value will trigger a bias correction update command on the device</p></td>
</tr>
<tr class="row-even"><td><p>decimation_filter</p></td>
<td><p>Read/Write</p></td>
<td><p>Decimation Filter Register Value</p></td>
<td><p>0 - 1999</p></td>
</tr>
<tr class="row-odd"><td><p>sync_mode_select</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Mode Select Encoded Value</p></td>
<td><p>0 - internal sync, 1 - direct input sync, 2 - scaled sync, 3 - output sync, 5 - pulse sync</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>ADIS1647X</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Debug Attribute Name</p></td>
<td><p>Access Type</p></td>
<td><p>Debug Attribute Description</p></td>
<td><p>Debug Attribute Valid Values</p></td>
</tr>
<tr class="row-even"><td><p>bias_correction_time_base_control</p></td>
<td><p>Read/Write</p></td>
<td><p>Bias Correction Time Base Control Value</p></td>
<td><p>0 - 12</p></td>
</tr>
<tr class="row-odd"><td><p>x_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>y_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>z_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>x_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>y_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>z_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>bias_correction_update</p></td>
<td><p>Write-only</p></td>
<td><p>Trigger a bias correction update command</p></td>
<td><p>Any written value will trigger a bias correction update command on the device</p></td>
</tr>
<tr class="row-even"><td><p>decimation_filter</p></td>
<td><p>Read/Write</p></td>
<td><p>Decimation Filter Register Value</p></td>
<td><p>0 - 1999</p></td>
</tr>
<tr class="row-odd"><td><p>burst_data_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Data Selection Encoded Bit</p></td>
<td><p>0 - burst data contains acceleration and angular velocity measurements, 1 - burst data contains delta-angle and delta-velocity measurements</p></td>
</tr>
<tr class="row-even"><td><p>burst_size_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Size Selection Encoded Bit</p></td>
<td><p>0 - burst data contains 16-bit values, 1 - burst data contains 32-bit values</p></td>
</tr>
<tr class="row-odd"><td><p>sync_mode_select</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Mode Select Encoded Value</p></td>
<td><p>0 - internal sync, 1 - direct input sync, 2 - scaled sync, 3 - output sync, 5 - pulse sync</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>ADIS1650X</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Debug Attribute Name</p></td>
<td><p>Access Type</p></td>
<td><p>Debug Attribute Description</p></td>
<td><p>Debug Attribute Valid Values</p></td>
</tr>
<tr class="row-even"><td><p>diag_gyroscope1_self_test_error</p></td>
<td><p>Read-only</p></td>
<td><p>Gyroscope 1 Self Test Error Fla</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_gyroscope1_self_test_error</p></td>
<td><p>Read-only</p></td>
<td><p>Gyroscope 1 Self Test Error Fla</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_acceleration_self_test_error</p></td>
<td><p>Read-only</p></td>
<td><p>Accelerometer Self Test Error Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>decimation_filter</p></td>
<td><p>Read/Write</p></td>
<td><p>Decimation Filter Register Value</p></td>
<td><p>0 - 1999</p></td>
</tr>
<tr class="row-even"><td><p>burst_data_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Data Selection Encoded Bit</p></td>
<td><p>0 - burst data contains acceleration and angular velocity measurements, 1 - burst data contains delta-angle and delta-velocity measurements</p></td>
</tr>
<tr class="row-odd"><td><p>burst_size_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Size Selection Encoded Bit</p></td>
<td><p>0 - burst data contains 16-bit values, 1 - burst data contains 32-bit values</p></td>
</tr>
<tr class="row-even"><td><p>sync_mode_select</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Mode Select Encoded Value</p></td>
<td><p>0 - internal sync, 1 - direct input sync, 2 - scaled sync, 3 - output sync</p></td>
</tr>
<tr class="row-odd"><td><p>internal_sensor_bandwidth</p></td>
<td><p>Read/Write</p></td>
<td><p>Internal Sensor Bandwidth Encoded Value</p></td>
<td><p>0 - wide bandwidth, 1 - 370 Hz</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>ADIS1657X</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Debug Attribute Name</p></td>
<td><p>Access Type</p></td>
<td><p>Debug Attribute Description</p></td>
<td><p>Debug Attribute Valid Values</p></td>
</tr>
<tr class="row-even"><td><p>diag_sensor_initialization_failure</p></td>
<td><p>Read-only</p></td>
<td><p>Sensor Initialization Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_x_axis_gyroscope_failure</p></td>
<td><p>Read-only</p></td>
<td><p>X Axis Gyroscope Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_y_axis_gyroscope_failure</p></td>
<td><p>Read-only</p></td>
<td><p>Y Axis Gyroscope Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_z_axis_gyroscope_failure</p></td>
<td><p>Read-only</p></td>
<td><p>Z Axis Gyroscope Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_x_axis_accelerometer_failure</p></td>
<td><p>Read-only</p></td>
<td><p>X Axis Accelerometer Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_y_axis_accelerometer_failure</p></td>
<td><p>Read-only</p></td>
<td><p>Y Axis Accelerometer Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>diag_z_axis_accelerometer_failure</p></td>
<td><p>Read-only</p></td>
<td><p>Z Axis Accelerometer Failure Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-odd"><td><p>diag_aduc_mcu_fault</p></td>
<td><p>Read-only</p></td>
<td><p>Internal Mcu Fault Flag</p></td>
<td><p>0 - error did not occur or 1 - error occurred</p></td>
</tr>
<tr class="row-even"><td><p>fifo_sample_count</p></td>
<td><p>Read-only</p></td>
<td><p>The FIFO_CNT register value</p></td>
<td><p>0 - 511</p></td>
</tr>
<tr class="row-odd"><td><p>spi_checksum</p></td>
<td><p>Read-only</p></td>
<td><p>The SPI_CHKSUM register value</p></td>
<td><p>0 - 65535</p></td>
</tr>
<tr class="row-even"><td><p>fifo_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>IFO Enable Bit Value</p></td>
<td><p>0 - FIFO disabled, 1 - FIFO enabled</p></td>
</tr>
<tr class="row-odd"><td><p>fifo_overflow_behavior</p></td>
<td><p>Read/Write</p></td>
<td><p>FIFO Overflow Behavior Encoded Value</p></td>
<td><p>0 - stop enqueuing samples, 1 - overwrite the oldest sample</p></td>
</tr>
<tr class="row-even"><td><p>fifo_watermark_interrupt_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>FIFO Watermark Interrupt Enable Bit Value</p></td>
<td><p>0 - watermark interrupt disabled, 1 - watermark interrupt enabled</p></td>
</tr>
<tr class="row-odd"><td><p>fifo_watermark_interrupt_polarity</p></td>
<td><p>Read/Write</p></td>
<td><p>FIFO Watermark Interrupt Polarity Encoded Value</p></td>
<td><p>0 - active low, 1 - active high</p></td>
</tr>
<tr class="row-even"><td><p>fifo_watermark_threshold_level</p></td>
<td><p>Read/Write</p></td>
<td><p>FIFO Watermark Threshold Level</p></td>
<td><p>0 - 511</p></td>
</tr>
<tr class="row-odd"><td><p>time_stamp_size</p></td>
<td><p>Read/Write</p></td>
<td><p>Timestamp Size Encoded Bit</p></td>
<td><p>0 - timestamp is in 16-bit format, 1 - timestamp is in 32-bit format</p></td>
</tr>
<tr class="row-even"><td><p>internal_sync_enable_4khz</p></td>
<td><p>Read/Write</p></td>
<td><p>4KHz Internal Sync Enable bit</p></td>
<td><p>0 - 2KHz Internal Sync, 1 - 4KHz Internal Sync</p></td>
</tr>
<tr class="row-odd"><td><p>bias_correction_time_base_control</p></td>
<td><p>Read/Write</p></td>
<td><p>Bias Correction Time Base Control Value</p></td>
<td><p>0 - 12</p></td>
</tr>
<tr class="row-even"><td><p>x_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>y_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>z_axis_gyroscope_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Gyroscope Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>x_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>X Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>y_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Y Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-odd"><td><p>z_axis_accelerometer_bias_correction_enable</p></td>
<td><p>Read/Write</p></td>
<td><p>Z Axis Accelerometer Bias Correction Enable Bit Value</p></td>
<td><p>0 - correction disabled, 1 - correction enabled</p></td>
</tr>
<tr class="row-even"><td><p>bias_correction_update</p></td>
<td><p>Write-only</p></td>
<td><p>Trigger a bias correction update command</p></td>
<td><p>Any written value will trigger a bias correction update command on the device</p></td>
</tr>
<tr class="row-odd"><td><p>fifo_flush</p></td>
<td><p>Write-only</p></td>
<td><p>Triggers a FIFO flush command</p></td>
<td><p>Any written value will trigger a FIFO flush command on the device</p></td>
</tr>
<tr class="row-even"><td><p>decimation_filter</p></td>
<td><p>Read/Write</p></td>
<td><p>Decimation Filter Register Value</p></td>
<td><p>0 - 3999</p></td>
</tr>
<tr class="row-odd"><td><p>burst_data_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Data Selection Encoded Bit</p></td>
<td><p>0 - burst data contains acceleration and angular velocity measurements, 1 - burst data contains delta-angle and delta-velocity measurements</p></td>
</tr>
<tr class="row-even"><td><p>burst_size_selection</p></td>
<td><p>Read/Write</p></td>
<td><p>Burst Size Selection Encoded Bit</p></td>
<td><p>0 - burst data contains 16-bit values, 1 - burst data contains 32-bit values</p></td>
</tr>
<tr class="row-odd"><td><p>sync_mode_select</p></td>
<td><p>Read/Write</p></td>
<td><p>Sync Mode Select Encoded Value</p></td>
<td><p>0 - internal sync, 1 - direct input sync, 2 - scaled sync, 3 - output sync</p></td>
</tr>
<tr class="row-even"><td><p>internal_sensor_bandwidth</p></td>
<td><p>Read/Write</p></td>
<td><p>Internal Sensor Bandwidth Encoded Value</p></td>
<td><p>0 - wide bandwidth, 1 - 370 Hz</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="device-buffers">
<h3>Device Buffers<a class="headerlink" href="#device-buffers" title="Link to this heading"></a></h3>
<p>The IIO AIDS device driver supports the usage of a data buffer for samples reading purposes.
The following channels are available for buffer readings, based on the chip used:</p>
<p><strong>ADIS1646X</strong>:</p>
<ul class="simple">
<li><p>anglvel_x</p></li>
<li><p>anglvel_y</p></li>
<li><p>anglvel_z</p></li>
<li><p>accel_x</p></li>
<li><p>accel_y</p></li>
<li><p>accel_z</p></li>
<li><p>temp0</p></li>
</ul>
<p><strong>ADIS1647X</strong>:</p>
<p>Burst data selection = 0:</p>
<blockquote>
<div><ul class="simple">
<li><p>anglvel_x</p></li>
<li><p>anglvel_y</p></li>
<li><p>anglvel_z</p></li>
<li><p>accel_x</p></li>
<li><p>accel_y</p></li>
<li><p>accel_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
<p>Burst data selection = 1:</p>
<blockquote>
<div><ul class="simple">
<li><p>deltaangl_x</p></li>
<li><p>deltaangl_y</p></li>
<li><p>deltaangl_z</p></li>
<li><p>deltavelocity_x</p></li>
<li><p>deltavelocity_y</p></li>
<li><p>deltavelocity_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1650X</strong>:</p>
<p>Burst data selection = 0:</p>
<blockquote>
<div><ul class="simple">
<li><p>anglvel_x</p></li>
<li><p>anglvel_y</p></li>
<li><p>anglvel_z</p></li>
<li><p>accel_x</p></li>
<li><p>accel_y</p></li>
<li><p>accel_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
<p>Burst data selection = 1:</p>
<blockquote>
<div><ul class="simple">
<li><p>deltaangl_x</p></li>
<li><p>deltaangl_y</p></li>
<li><p>deltaangl_z</p></li>
<li><p>deltavelocity_x</p></li>
<li><p>deltavelocity_y</p></li>
<li><p>deltavelocity_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
<p><strong>ADIS1657X</strong>:</p>
<p>Burst data selection = 0:</p>
<blockquote>
<div><ul class="simple">
<li><p>anglvel_x</p></li>
<li><p>anglvel_y</p></li>
<li><p>anglvel_z</p></li>
<li><p>accel_x</p></li>
<li><p>accel_y</p></li>
<li><p>accel_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
<p>Burst data selection = 1:</p>
<blockquote>
<div><ul class="simple">
<li><p>deltaangl_x</p></li>
<li><p>deltaangl_y</p></li>
<li><p>deltaangl_z</p></li>
<li><p>deltavelocity_x</p></li>
<li><p>deltavelocity_y</p></li>
<li><p>deltavelocity_z</p></li>
<li><p>temp0</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="iio-adis-driver-initialization-example">
<h2><a class="toc-backref" href="#id57" role="doc-backlink">IIO ADIS Driver Initialization Example</a><a class="headerlink" href="#iio-adis-driver-initialization-example" title="Link to this heading"></a></h2>
<section id="id33">
<h3>ADIS1646X<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1646x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1646x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1646x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16465_1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1646x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1646X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1646x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1646X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1646X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1646x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1646x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1646x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1646x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1646x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1646x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1646x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1646x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1646x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1646x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16465-1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1646X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1646x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1646x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1646x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1646x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1646x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1646x_iio_remove</span><span class="p">(</span><span class="n">adis1646x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id34">
<h3>ADIS1647X<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1647x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1647x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1647x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16477_1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1647x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1647X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1647x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1647X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1647X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1647x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1647x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1647x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1647x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1647x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1647x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1647x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1647x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1647x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1647x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16477-1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1647X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1647x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1647x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1647x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1647x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1647x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1647x_iio_remove</span><span class="p">(</span><span class="n">adis1647x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id35">
<h3>ADIS1650X<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1650x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1650x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1650x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16505_2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1650x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1650X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1650x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1650X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1650X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1650x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1650x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1650x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1650x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1650x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1650x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1650x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1650x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1650x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1650x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16505-2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1650X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1650x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1650x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1650x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1650x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1650x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1650x_iio_remove</span><span class="p">(</span><span class="n">adis1650x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id36">
<h3>ADIS1654X<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1654x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1654x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1654x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_DEFAULT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16545_3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1654x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1654X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1654x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1654X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1654X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1654x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1654x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1654x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1654x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1654x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1654x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1654x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1654x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1654x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1654x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16545-3&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1654X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1654x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1654x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1654x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1654x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1654x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1654x_iio_remove</span><span class="p">(</span><span class="n">adis1654x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id37">
<h3>ADIS1655X<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1655x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1655x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1655x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_DEFAULT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16550</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1655x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1655X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1655x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1655X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1655X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1655x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1655x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1655x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1655x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1655x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1655x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1655x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1655x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1655x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1655x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16550&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1655X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1655x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1655x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1655x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1655x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1655x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1655x_iio_remove</span><span class="p">(</span><span class="n">adis1655x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id38">
<h3>ADIS1657X<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">no_os_spi_init_param</span><span class="w"> </span><span class="n">adis1657x_spi_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_DEVICE_ID</span><span class="p">,</span>
<span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_BAUDRATE</span><span class="p">,</span>
<span class="p">.</span><span class="n">bit_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_BIT_ORDER_MSB_FIRST</span><span class="p">,</span>
<span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_SPI_MODE_3</span><span class="p">,</span>
<span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_OPS</span><span class="p">,</span>
<span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_CS</span><span class="p">,</span>
<span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_gpio_init_param</span><span class="w"> </span><span class="n">adis1657x_gpio_reset_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PORT_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_RESET_PIN_NUM</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">pull</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_PULL_NONE</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_EXTRA</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">adis_init_param</span><span class="w"> </span><span class="n">adis1657x_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">gpio_reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_gpio_reset_ip</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sync_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS_SYNC_OUTPUT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS16577_3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_init_param</span><span class="w"> </span><span class="n">adis1657x_gpio_irq_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_ctrl_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_OPS</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_IRQ_EXTRA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_cb_info</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_EVT_GPIO</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">peripheral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_GPIO_IRQ</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1657X_GPIO_CB_HANDLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig_init_param</span><span class="w"> </span><span class="n">adis1657x_gpio_trig_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1657X_GPIO_TRIG_IRQ_ID</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq_trig_lvl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_IRQ_EDGE_RISING</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cb_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_cb_info</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADIS1657X_GPIO_TRIG_NAME</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define DATA_BUFFER_SIZE 400</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">iio_data_buffer</span><span class="p">[</span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)];</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adis_iio_dev</span><span class="w"> </span><span class="o">*</span><span class="n">adis1657x_iio_desc</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_data_buffer</span><span class="w"> </span><span class="n">data_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">iio_data_buffer</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_BUFFER_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">iio_hw_trig</span><span class="w"> </span><span class="o">*</span><span class="n">adis1657x_trig_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">no_os_irq_ctrl_desc</span><span class="w"> </span><span class="o">*</span><span class="n">adis1657x_irq_desc</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_desc</span><span class="w"> </span><span class="o">*</span><span class="n">app</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_init_param</span><span class="w"> </span><span class="n">app_init_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_iio_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1657x_iio_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Initialize interrupt controller */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_ctrl_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1657x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_gpio_irq_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_os_irq_set_priority</span><span class="p">(</span><span class="n">adis1657x_irq_desc</span><span class="p">,</span><span class="w"> </span><span class="n">adis1657x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="n">adis1657x_gpio_trig_ip</span><span class="p">.</span><span class="n">irq_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_irq_desc</span><span class="p">;</span>

<span class="cm">/* Initialize hardware trigger */</span>
<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_hw_trig_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">adis1657x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis1657x_gpio_trig_ip</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* List of devices */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_app_device</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">                </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adis16577-3&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_iio_desc</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">dev_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_iio_desc</span><span class="o">-&gt;</span><span class="n">iio_dev</span><span class="p">,</span>
<span class="w">                </span><span class="p">.</span><span class="n">read_buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* List of triggers */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">iio_trigger_init</span><span class="w"> </span><span class="n">trigs</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">IIO_APP_TRIGGER</span><span class="p">(</span><span class="n">ADIS1657X_GPIO_TRIG_NAME</span><span class="p">,</span><span class="w"> </span><span class="n">adis1657x_trig_desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adis_iio_trig_desc</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">app_init_param</span><span class="p">.</span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_devices</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_devices</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">uart_init_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_uart_ip</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trigs</span><span class="p">;</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">nb_trigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_OS_ARRAY_SIZE</span><span class="p">(</span><span class="n">trigs</span><span class="p">);</span>
<span class="n">app_init_param</span><span class="p">.</span><span class="n">irq_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adis1657x_irq_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">app_init_param</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>

<span class="cm">/* Update the reference to iio_desc */</span>
<span class="n">adis1657x_trig_desc</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">app</span><span class="o">-&gt;</span><span class="n">iio_desc</span><span class="p">;</span>

<span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iio_app_run</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="n">iio_app_remove</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>

<span class="nl">exit</span><span class="p">:</span>
<span class="w">        </span><span class="n">iio_hw_trig_remove</span><span class="p">(</span><span class="n">adis1657x_trig_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">no_os_irq_ctrl_remove</span><span class="p">(</span><span class="n">adis1657x_irq_desc</span><span class="p">);</span>
<span class="w">        </span><span class="n">adis1657x_iio_remove</span><span class="p">(</span><span class="n">adis1657x_iio_desc</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="w">                </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Error!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="frequency/admfm2000.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">ADMFM2000 no-OS driver</a>
    <a href="io-link/max22516.html" title="Next document (Alt+Shift+RightArrow)" class="next">MAX22516 no-OS Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2023-2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>